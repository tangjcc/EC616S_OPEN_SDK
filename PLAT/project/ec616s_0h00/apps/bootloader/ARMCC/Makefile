
AVAILABLE_TARGETS = ec616s_0h00

TOOLCHAIN = ARMCC
TOP := ../../../../../..

BINNAME = bootloader

BUILD_EC_MW                  = n
BUILD_PS                     = n
BUILD_FW                     = n
BUILD_OS                     = n
BUILD_AT                     = n
BUILD_AT_DEBUG               = n
DRIVER_PMU_ENABLE            = n
DRIVER_FLASHRT_ENABLE        = n
DRIVER_ECMAIN_ENABLE         = n

THIRDPARTY_MQTT_ENABLE = n
THIRDPARTY_CISONENET_ENABLE = n
THIRDPARTY_MBEDTLS_ENABLE = n
THIRDPARTY_LITTEFS_ENABLE = n
THIRDPARTY_RTT_ENABLE = n
THIRDPARTY_LWIP_ENABLE = n
THIRDPARTY_ROHC_ENABLE = n
THIRDPARTY_PING_ENABLE = n
THIRDPARTY_IPERF_ENABLE = n
THIRDPARTY_LIBSNTP_ENABLE	= n

DRIVER_SPI_ENABLE = n
DRIVER_I2C_ENABLE = n
DRIVER_PMU_ENABLE = n
DRIVER_FLASHRT_ENABLE = n
DRIVER_TIMER_ENABLE = n
DRIVER_UNILOG_ENABLE = n
DRIVER_CIPHER_FLH_ENABLE = n
DRIVER_SLCNT_ENABLE = n
DRIVER_MCUMODE_ENABLE = n
DRIVER_PMU_ENABLE = n
DRIVER_ADC_ENABLE     = y
DRIVER_HAL_UART_ENABLE = n
DRIVER_LPUART_ENABLE   = n
MIDDLEWARE_DEBUG_TRACE_ENABLE = n
MIDDLEWARE_CMS_ENABLE         = n
MIDDLEWARE_SIMBIP_ENABLE      = n
MIDDLEWARE_NVRAM_ENABLE       = n
MIDDLEWARE_RUNNV_ENABLE       = n

##############################################
#Select the OEM of FOTA scheme
#definitions of FEATURE_FOTA_SCHEME_OEM:
# 0 - ABUP
# 1 - ECOM
# 2 - OTHERS
FEATURE_FOTA_SCHEME_OEM = 1

ifeq ($(FEATURE_FOTA_SCHEME_OEM), 0)
#ABUP
THIRDPARTY_ABUP_FOTA_BL_ENABLE  = y
MIDDLEWARE_FOTA_ENABLE          = n
else ifeq ($(FEATURE_FOTA_SCHEME_OEM), 1)
#ECOM
THIRDPARTY_ABUP_FOTA_BL_ENABLE  = n
MIDDLEWARE_FOTA_ENABLE          = y
else
#OTHERS
THIRDPARTY_ABUP_FOTA_BL_ENABLE  = n
MIDDLEWARE_FOTA_ENABLE          = n
endif

#CONFIG_PROJ_BL_SECURITY_BOOT  = y
#CONFIG_PROJ_APP_SECURITY_BOOT  = y

include $(TOP)/PLAT/project/$(TARGET)/apps/$(PROJECT)/code/Makefile.inc
include $(TOP)/PLAT/project/$(TARGET)/apps/$(PROJECT)/armcc/MakeProj.rules

include $(TOP)/PLAT/tools/scripts/Makefile.rules

#enable wdt
CFLAGS += -DWDT_FEATURE_ENABLE=1

ifeq ($(CONFIG_PROJ_APP_SECURITY_BOOT), y)
CFLAGS += -DCONFIG_PROJ_APP_SECURITY_BOOT
endif

ifeq ($(THIRDPARTY_ABUP_FOTA_BL_ENABLE), y)
CFLAGS += -DTHIRDPARTY_ABUP_FOTA_BL_ENABLE
endif

ifeq ($(MIDDLEWARE_FOTA_ENABLE), y)
ASMFLAGS += --pd "MIDDLEWARE_FOTA_ENABLE SETA 1"
CFLAGS   += -DMIDDLEWARE_FOTA_ENABLE
endif

CFLAGS += -DBATMON_IN_BOOTLOADER
